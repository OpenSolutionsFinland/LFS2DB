<?xml version="1.0"?>
<openerp>
   <data>
	   
	   <!-- Inherited split lot form with IMEI code selection -->
	   <!-- 
	   <record model="ir.ui.view" id="split_lot_extension">
    		<field name="name">stock.move.split.form.extension</field>
    		<field name="model">stock.move.split</field>
    		<field name="inherit_id" ref="stock.split_view_in_lot"/>
    		<field name="arch" type="xml">
        		<field name="quantity" position="after">
					<field name="imei_code" string="IMEI" />
				</field>
    		</field>
		</record>
	   -->
	
	   <!-- Inherited stock.move form with bsm data -->
	   <record model="ir.ui.view" id="stock_move_extension">
    		<field name="name">stock.move.form.extension</field>
    		<field name="model">stock.move</field>
    		<field name="inherit_id" ref="stock.view_move_form"/>
    		<field name="arch" type="xml">
        		<button name="365" position="after">
					<field name="bsm_product_code" string="Product code" />
					<field name="bsm_imei_code" string="IMEI code" />
				</button>
    		</field>
		</record>
	   
		<!-- View to synchronize BSM data -->
		<record model="ir.ui.view" id="view_bsm_importer">
	    	<field name="name">bsm.importer.form</field>
	    	<field name="model">bsm.importer</field>
			<field name="arch" type="xml">
				<form string="BSM Importer" version="7.0" create="false" edit="false">
					<group string="BSM">
						<div>
							<label for="imei_selection" string="IMEI code list" />
							<field name="imei_selection" />
						</div>
						<newline/>
						<div class="oe_inline" style="float: left;">
							<button name="getSerials" type="object" string="Read Serials" />
						</div>
						<!-- 
						<div class="oe_inline" style="float: left;">
							<button name="addBSM" type="object" string="Add BSM line" />
						</div>
					    -->
					</group>
				</form>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_bsm_import">
			<field name="name">bsm.import.action</field>
			<field name="view_id" ref="view_bsm_importer"/>
			<field name="domain"></field>
			<field name="res_model">bsm.importer</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>

			<field name="target">current</field>
		</record>
		
 	   <record model="ir.ui.view" id="bsm_data_view">
     		<field name="name">bsm.data.form</field>
     		<field name="model">bsm.data</field>
 			<field name="arch" type="xml">
                 <form string="Add BSM line" version="7.0">
 					<group string="Information" colspan="3">
 						<div colspan="2">
 							<label for="bsm_imei_code" string="IMEI" />
 							<field name="bsm_imei_code"/>
 						</div>
 						<newline/>
 						<div colspan="2">
 							<label for="bsm_product_code" string="Product Code" />
 							<field name="bsm_product_code"/>
 						</div>
 						<newline/>
 					</group>
 				</form>
 			</field>
 		</record>
		<menuitem id="bsm_importer_menuitem" name="BSM Importer" parent="stock.menu_traceability" action="action_bsm_import" />
		 
	</data>
</openerp>
		   